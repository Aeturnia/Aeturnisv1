import{j as e}from"./query-vendor-VBf2NspY.js";import{r as i}from"./router-vendor-Cn6bChYk.js";import{u as A,a as j,b as D,c as G}from"./index-DUBnp2Sp.js";import"./react-vendor-BtP0CW_r.js";import"./gesture-vendor-CKK3uJth.js";const N=i.memo(({character:s,currentZone:c})=>{const n=A();if(!s)return e.jsx("div",{className:"bg-dark-800/95 backdrop-blur-sm p-3 border-b border-dark-600",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-dark-400 text-sm",children:"No character selected"})})});const o=s.health/s.maxHealth*100,l=s.mana/s.maxMana*100,d=s.stamina&&s.maxStamina?s.stamina/s.maxStamina*100:0;return e.jsxs("div",{className:"bg-dark-800/95 backdrop-blur-sm p-3 border-b border-dark-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm",children:s.name}),e.jsxs("p",{className:"text-dark-400 text-xs",children:["Lvl ",s.level," ",s.race]})]})]}),e.jsxs("div",{className:"flex-1 max-w-sm space-y-1 mx-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-red-400 text-xs w-4",children:"❤️"}),e.jsx("div",{className:"flex-1 h-2 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full transition-all duration-300",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-xs text-white min-w-[40px] text-right",children:[s.health,"/",s.maxHealth]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-400 text-xs w-4",children:"💧"}),e.jsx("div",{className:"flex-1 h-2 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-xs text-white min-w-[40px] text-right",children:[s.mana,"/",s.maxMana]})]}),s.stamina&&s.maxStamina&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-yellow-400 text-xs w-4",children:"⚡"}),e.jsx("div",{className:"flex-1 h-2 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500 rounded-full transition-all duration-300",style:{width:`${d}%`}})}),e.jsxs("span",{className:"text-xs text-white min-w-[40px] text-right",children:[s.stamina,"/",s.maxStamina]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"📍"}),e.jsx("span",{className:"text-xs text-white",children:(c==null?void 0:c.name)||"Unknown Area"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n.connected?"bg-green-500":n.connecting?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-white",children:n.connected?"Online":n.connecting?"Connecting":"Offline"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-2 pt-2 border-t border-dark-700",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"💪"}),e.jsx("span",{className:"text-xs text-white",children:s.stats.strength})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"🏃"}),e.jsx("span",{className:"text-xs text-white",children:s.stats.dexterity})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"🧠"}),e.jsx("span",{className:"text-xs text-white",children:s.stats.intelligence})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-dark-400",children:"🛡️"}),e.jsx("span",{className:"text-xs text-white",children:s.stats.vitality})]})]})]})});N.displayName="GameHUD";const w=i.memo(({character:s,onAction:c})=>{const{hapticFeedback:n}=j(),o=(t,x)=>{n("medium"),c(t,x)},l=[{id:"attack",icon:"⚔️",label:"Attack",color:"bg-red-600",hoverColor:"hover:bg-red-700",disabled:!s},{id:"defend",icon:"🛡️",label:"Defend",color:"bg-blue-600",hoverColor:"hover:bg-blue-700",disabled:!s},{id:"use_item",icon:"🧪",label:"Use Item",color:"bg-green-600",hoverColor:"hover:bg-green-700",disabled:!s},{id:"interact",icon:"🤝",label:"Interact",color:"bg-purple-600",hoverColor:"hover:bg-purple-700",disabled:!s}],d=[{id:"character",icon:"👤",label:"Character",color:"bg-dark-600",hoverColor:"hover:bg-dark-500"},{id:"inventory",icon:"🎒",label:"Inventory",color:"bg-dark-600",hoverColor:"hover:bg-dark-500"},{id:"map",icon:"🗺️",label:"Map",color:"bg-dark-600",hoverColor:"hover:bg-dark-500"},{id:"settings",icon:"⚙️",label:"Settings",color:"bg-dark-600",hoverColor:"hover:bg-dark-500"}],h=(t,x="large")=>{const m=`
      btn-touch flex flex-col items-center justify-center rounded-lg text-white font-medium
      transition-all duration-200 active:scale-95 shadow-lg
      ${t.color} ${t.hoverColor}
      ${t.disabled?"opacity-50 cursor-not-allowed":""}
    `,g=x==="large"?"w-16 h-16 text-lg":"w-12 h-12 text-sm";return e.jsxs("button",{onClick:()=>!t.disabled&&o(t.id),className:`${m} ${g}`,disabled:t.disabled,title:t.label,children:[e.jsx("div",{className:x==="large"?"text-xl mb-1":"text-lg mb-0.5",children:t.icon}),e.jsx("span",{className:"text-xs",children:t.label})]},t.id)};return e.jsxs("div",{className:"bg-dark-800/95 backdrop-blur-sm border-t border-dark-600 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[e.jsx("div",{className:"flex space-x-2",children:l.map(t=>h(t,"large"))}),e.jsx("div",{className:"flex space-x-1",children:d.map(t=>h(t,"small"))})]}),s&&e.jsx("div",{className:"flex items-center justify-center mt-2 pt-2 border-t border-dark-700",children:e.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-yellow-400",children:"⚡"}),e.jsx("span",{className:"text-white",children:"Ready"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-green-400",children:"🔋"}),e.jsx("span",{className:"text-white",children:"Well Rested"})]})]})})]})});w.displayName="ActionBar";const E=s=>{switch(s){case"system":return"text-gray-300";case"combat":return"text-red-400";case"loot":return"text-yellow-400";case"social":return"text-blue-400";case"quest":return"text-green-400";default:return"text-white"}},T=s=>{switch(s){case"system":return"🔧";case"combat":return"⚔️";case"loot":return"💰";case"social":return"💬";case"quest":return"📝";default:return"📄"}},U=s=>s.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),y=i.memo(({messages:s,maxMessages:c=10,autoScroll:n=!0})=>{const o=i.useRef(null),l=s.slice(-c);return i.useEffect(()=>{n&&o.current&&(o.current.scrollTop=o.current.scrollHeight)},[s,n]),l.length===0?e.jsx("div",{className:"bg-dark-800/90 backdrop-blur-sm rounded-lg p-3 border border-dark-600",children:e.jsxs("div",{className:"text-center text-dark-400 text-sm",children:[e.jsx("div",{className:"text-lg mb-1",children:"📜"}),e.jsx("p",{children:"No messages yet..."}),e.jsx("p",{className:"text-xs mt-1",children:"Game events will appear here"})]})}):e.jsxs("div",{className:"bg-dark-800/90 backdrop-blur-sm rounded-lg border border-dark-600 overflow-hidden",children:[e.jsx("div",{className:"bg-dark-700/50 px-3 py-2 border-b border-dark-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Game Log"}),e.jsxs("span",{className:"text-xs text-dark-400",children:[l.length," message",l.length!==1?"s":""]})]})}),e.jsx("div",{ref:o,className:"max-h-32 overflow-y-auto momentum-scroll p-2 space-y-1",children:l.map((d,h)=>e.jsxs("div",{className:`
              flex items-start space-x-2 text-sm p-1 rounded
              ${h===l.length-1?"bg-dark-700/30":""}
              transition-colors duration-200
            `,children:[e.jsx("span",{className:"text-xs text-dark-400 font-mono shrink-0 mt-0.5",children:U(d.timestamp)}),e.jsx("span",{className:"shrink-0 mt-0.5",children:T(d.type)}),e.jsx("span",{className:`${E(d.type)} break-words`,children:d.message})]},d.id))}),e.jsx("div",{className:"bg-dark-700/50 px-3 py-1 border-t border-dark-600",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-dark-400",children:[e.jsxs("span",{children:["Auto-scroll: ",n?"On":"Off"]}),e.jsxs("span",{children:["Max: ",c]})]})})]})});y.displayName="TextDisplay";const k=i.memo(()=>{const{currentCharacter:s,getCharacters:c}=D(),{currentZone:n,getZones:o}=G(),{hapticFeedback:l}=j(),[d,h]=i.useState(!0),[t,x]=i.useState(null),[m,g]=i.useState(null),[M,S]=i.useState([{id:"1",type:"system",message:"Welcome to Aeturnis Online! Your adventure begins...",timestamp:new Date}]);i.useEffect(()=>{v()},[]),i.useEffect(()=>{s&&!m&&g(s)},[s,m]);const v=async()=>{try{h(!0),x(null),await c(),await o(),a("system","Game data loaded successfully.")}catch(r){const u=r instanceof Error?r.message:"Failed to load game data";x(u),a("system",`Error: ${u}`)}finally{h(!1)}},a=(r,u)=>{const p={id:Date.now().toString(),type:r,message:u,timestamp:new Date};S(f=>[...f,p].slice(-50))},b=async(r,u)=>{l("light");try{switch(r){case"move":a("system",`Moving ${u.direction}...`);break;case"attack":a("combat","Initiating combat...");break;case"interact":a("system","Interacting with object...");break;case"inventory":a("system","Opening inventory...");break;case"character":a("system","Opening character sheet...");break;case"map":a("system","Opening map...");break;default:a("system",`Unknown action: ${r}`)}}catch(p){const f=p instanceof Error?p.message:"Action failed";a("system",`Error: ${f}`)}},C=({point:r})=>{l("light"),a("system",`Touched at (${Math.round(r.x)}, ${Math.round(r.y)})`)},{gestureHandler:$}=j({onTap:C,onDoubleTap:({point:r})=>{l("medium"),a("system",`Double tap at (${Math.round(r.x)}, ${Math.round(r.y)}) - Quick action`)},onSwipeUp:()=>{a("system","Swiped up - Moving north"),b("move",{direction:"north"})},onSwipeDown:()=>{a("system","Swiped down - Moving south"),b("move",{direction:"south"})},onSwipeLeft:()=>{a("system","Swiped left - Moving west"),b("move",{direction:"west"})},onSwipeRight:()=>{a("system","Swiped right - Moving east"),b("move",{direction:"east"})}});return d?e.jsx("div",{className:"h-full bg-dark-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4 animate-spin",children:"⚔️"}),e.jsx("p",{className:"text-white",children:"Loading game world..."})]})}):t?e.jsx("div",{className:"h-full bg-dark-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("p",{className:"text-red-400 mb-4",children:t}),e.jsx("button",{onClick:v,className:"btn-touch btn-primary",children:"Retry"})]})}):e.jsxs("div",{className:"h-full bg-dark-900 flex flex-col relative overflow-hidden",children:[e.jsx(N,{character:m,currentZone:n}),e.jsxs("div",{className:"flex-1 relative overflow-hidden",...$(),children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/20 to-green-900/20",children:[e.jsx("div",{className:"absolute bottom-10 left-10 w-6 h-6 bg-green-600 rounded-full opacity-60"}),e.jsx("div",{className:"absolute bottom-20 right-15 w-4 h-4 bg-amber-600 rounded-full opacity-60"}),e.jsx("div",{className:"absolute top-20 left-20 w-5 h-5 bg-gray-600 rounded-full opacity-60"}),e.jsx("div",{className:"absolute top-40 right-30 w-3 h-3 bg-blue-600 rounded-full opacity-60"})]}),m&&e.jsx("div",{className:"absolute w-8 h-8 bg-primary-500 rounded-full border-2 border-white shadow-lg z-10 transition-all duration-300",style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-xs font-bold",children:m.name.charAt(0).toUpperCase()})}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 mb-16",children:e.jsx(y,{messages:M,maxMessages:5})}),e.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-xs text-dark-400 bg-dark-800/80 rounded px-2 py-1",children:"Tap to interact • Swipe to move • Double tap for quick actions"})})]}),e.jsx(w,{character:m,onAction:b})]})});k.displayName="MainGameView";function q(){return e.jsx(k,{})}export{q as GameScreen};
